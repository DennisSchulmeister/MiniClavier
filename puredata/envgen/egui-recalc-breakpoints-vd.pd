#N canvas 0 49 1920 1009 12;
#X obj -30 -30 preset_hub k12 1 %hidden%;
#X text 10 90 \$1 must be the name of the array (attack or release).
, f 69;
#X text 10 110 A bang on the inlet starts the iteration., f 69;
#X obj 100 200 inlet;
#X obj 100 270 trigger b b;
#X obj 130 300 ./egui-get-main;
#X obj 130 330 get egui__main view;
#X obj 130 359 value _\$0_view;
#X text 110 250 ---- Get constants for calculation ----;
#X obj 100 390 trigger b b;
#X obj 130 420 value _\$1_plot_padding;
#X obj 280 450 * 2;
#X obj 480 420 value _\$1_plot_w;
#X obj 630 420 value _\$1_plot_h;
#X text 480 480 [expr] only understands \$0;
#X obj 100 520 trigger b b;
#X obj 150 820 spigot;
#X obj 130 550 ./egui-foreach-breakpoint \$2;
#X obj 100 2110 outlet;
#X obj 630 451 value _\$0_height;
#X obj 480 450 value _\$0_width;
#X obj 320 450 value _\$0_padding2;
#X obj 130 450 value _\$0_padding;
#X text 10 10 Internal abstraction used by egui-recalc-breakpoints
to calculate the value and duration of all breakpoints whose x/y values
have changed. Has been split into its own abstraction to avoid duplication
and make the logic easier to understand., f 69;
#X obj 150 630 trigger p p;
#X obj 180 690 value _\$0_x;
#X obj 520 690 value _\$0_prev_y;
#X obj 150 760 trigger p b;
#X text 160 740 ---- Skip \, if x/y have not changed ----;
#X obj 150 580 trigger p;
#X text 160 610 ---- Get values for calculation ----;
#X obj 220 790 expr (_\$0_x != _\$0_prev_x) || (_\$0_y != _\$0_prev_y)
;
#X text 110 500 ---- Recalculate value and duration ----;
#X msg 780 420 0;
#X obj 780 449 value _\$0_prev_starttime;
#X obj 660 690 value _\$0_starttime;
#X text 160 1620 ---- Remember start time for next iteration ----;
#X obj 150 1640 value _\$0_starttime;
#X obj 150 1669 value _\$0_prev_starttime;
#X obj 280 690 value _\$0_prev_x;
#X obj 420 690 value _\$0_y;
#X obj 180 660 get egui__breakpoint x prev_x y prev_y starttime;
#X obj 200 2110 outlet;
#X obj 150 850 trigger p b;
#X text 160 960 ---- Recalculate values ----;
#X text 420 550 Don't skip dummy breakpoint \, as the release dummy
is linked to the last attack breakpoint \, and could have been moved
with the mouse., f 68;
#X text 160 1230 ---- Special logik for dummy release breakpoint: Mirror
back to final attack breakpoint ----, f 93;
#X obj 230 580 value _\$0_current_index;
#X obj 180 1010 trigger b p, f 92;
#X obj 150 1250 trigger b p;
#X obj 250 1340 select release;
#X obj 250 1369 expr _\$0_current_index == 0;
#X obj 180 1400 spigot;
#X obj 180 1280 trigger p b;
#X obj 250 1310 symbol \$2;
#X text 330 1310 Is this the first release breakpoint?;
#X obj 180 1440 trigger p b;
#X obj 210 1480 ./egui-get-breakpoint attack -1;
#X msg 750 1540 0;
#X obj 210 1510 trigger b p, f 87;
#X text 270 1440 Copy values to last attack breakpoint;
#X obj 150 980 trigger p p;
#X text 10 130 Sends 1/0 on the right outlet \, depending on data has
been changed., f 69;
#X obj 970 450 value _\$0_data_changed;
#X msg 970 420 0;
#X obj 180 910 value _\$0_data_changed;
#X msg 180 880 1;
#X obj 200 2080 value _\$0_data_changed;
#X obj 100 2050 trigger b b;
#X obj 180 1540 get egui__breakpoint x prev_x y prev_y value duration
enabled selected, f 71;
#X obj 180 1570 set egui__breakpoint x prev_x y prev_y value duration
enabled selected starttime, f 91;
#X text 110 2030 ---- Confirm execution ----;
#X text 110 1720 ---- Update selected flag ----;
#X obj 100 1740 trigger b b;
#X obj 130 1770 value _\$0_data_changed;
#X obj 130 1799 select 1;
#X obj 130 1828 ./egui-foreach-breakpoint attack;
#X obj 160 1890 get egui__breakpoint selected;
#X obj 160 1919 select 2;
#X msg 160 1950 1;
#X msg 210 1950 0;
#X text 230 1920 2 = New selected breakpoint;
#X obj 160 1980 set egui__breakpoint selected, f 40;
#X obj 160 1860 trigger p p, f 40;
#X obj 530 1892 get egui__breakpoint selected;
#X obj 530 1921 select 2;
#X msg 530 1950 1;
#X msg 580 1950 0;
#X text 600 1922 2 = New selected breakpoint;
#X obj 530 1982 set egui__breakpoint selected, f 40;
#X obj 530 1862 trigger p p, f 40;
#X obj 500 1830 ./egui-foreach-breakpoint release;
#X text 850 1040 Keep in mind \, that the coordinate system starts
at the top-left corner in PD. To make up for this \, the plots are
moved to the bottom of the GOP \, but the Y-coordinate must be flipped.
, f 67;
#X obj 180 1180 set egui__breakpoint selected duration value prev_x
prev_y, f 92;
#X obj 180 1040 expr 2 \; ((_\$0_x / (_\$0_width - _\$0_padding2))
* _\$0_view) - _\$0_prev_starttime \; _\$0_y / (_\$0_height - _\$0_padding2)
* -1 \; _\$0_x \; _\$0_y \;, f 89;
#X obj 220 1150 ./egui-clip-duration;
#X obj 420 1150 ./egui-clip-value;
#X obj 1050 1180 print new duration;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 4 1 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 9 0 15 0;
#X connect 9 1 10 0;
#X connect 9 1 12 0;
#X connect 9 1 13 0;
#X connect 9 1 33 0;
#X connect 9 1 64 0;
#X connect 10 0 11 0;
#X connect 10 0 22 0;
#X connect 11 0 21 0;
#X connect 12 0 20 0;
#X connect 13 0 19 0;
#X connect 15 0 73 0;
#X connect 15 1 17 0;
#X connect 16 0 43 0;
#X connect 17 0 29 0;
#X connect 17 1 47 0;
#X connect 24 0 27 0;
#X connect 24 1 41 0;
#X connect 27 0 16 0;
#X connect 27 1 31 0;
#X connect 29 0 24 0;
#X connect 31 0 16 1;
#X connect 33 0 34 0;
#X connect 37 0 38 0;
#X connect 41 0 25 0;
#X connect 41 1 39 0;
#X connect 41 2 40 0;
#X connect 41 3 26 0;
#X connect 41 4 35 0;
#X connect 43 0 61 0;
#X connect 43 1 66 0;
#X connect 48 0 94 0;
#X connect 48 1 93 5;
#X connect 49 0 37 0;
#X connect 49 1 53 0;
#X connect 50 0 51 0;
#X connect 51 0 52 1;
#X connect 52 0 56 0;
#X connect 53 0 52 0;
#X connect 53 1 54 0;
#X connect 54 0 50 0;
#X connect 56 0 69 0;
#X connect 56 1 57 0;
#X connect 57 0 59 0;
#X connect 58 0 70 8;
#X connect 59 0 58 0;
#X connect 59 1 70 9;
#X connect 61 0 49 0;
#X connect 61 1 48 0;
#X connect 64 0 63 0;
#X connect 66 0 65 0;
#X connect 67 0 42 0;
#X connect 68 0 18 0;
#X connect 68 1 67 0;
#X connect 69 0 70 0;
#X connect 69 1 70 1;
#X connect 69 2 70 2;
#X connect 69 3 70 3;
#X connect 69 4 70 4;
#X connect 69 5 70 5;
#X connect 69 6 70 6;
#X connect 69 7 70 7;
#X connect 73 0 68 0;
#X connect 73 1 74 0;
#X connect 74 0 75 0;
#X connect 75 0 76 0;
#X connect 75 0 91 0;
#X connect 76 0 83 0;
#X connect 77 0 78 0;
#X connect 78 0 79 0;
#X connect 78 1 80 0;
#X connect 79 0 82 0;
#X connect 80 0 82 0;
#X connect 83 0 77 0;
#X connect 83 1 82 1;
#X connect 84 0 85 0;
#X connect 85 0 86 0;
#X connect 85 1 87 0;
#X connect 86 0 89 0;
#X connect 87 0 89 0;
#X connect 90 0 84 0;
#X connect 90 1 89 1;
#X connect 91 0 90 0;
#X connect 94 0 93 0;
#X connect 94 1 95 0;
#X connect 94 2 96 0;
#X connect 94 3 93 3;
#X connect 94 4 93 4;
#X connect 95 0 93 1;
#X connect 95 0 97 0;
#X connect 96 0 93 2;
