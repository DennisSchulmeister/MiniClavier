#N canvas 0 49 1920 1009 12;
#X obj -30 -30 preset_hub k12 1 %hidden%;
#X text 10 140 A bang on the inlet starts the iteration., f 69;
#X text 10 10 Internal abstraction used by egui-recalc-breakpoints
to calculate the x/y values of each breakpoint based on its start time
\, duration and value. Has been split into its own abstraction to avoid
duplication and make the logic easier to understand., f 69;
#X obj 100 200 inlet;
#X obj 100 270 trigger b b;
#X obj 140 300 ./egui-get-main;
#X obj 140 330 get egui__main view;
#X obj 140 359 value _\$0_view;
#X text 110 250 ---- Get constants for calculation ----;
#X obj 100 390 trigger b b;
#X obj 130 420 value _\$1_plot_padding;
#X obj 280 450 * 2;
#X obj 480 420 value _\$1_plot_w;
#X obj 630 420 value _\$1_plot_h;
#X text 490 470 [expr] only understands \$0;
#X obj 100 790 trigger b b;
#X obj 160 880 trigger p p;
#X obj 160 850 spigot;
#X text 220 850 Skip dummy breakpoint;
#X obj 160 980 trigger b p, f 99;
#X obj 190 910 get egui__breakpoint value duration starttime;
#X text 10 110 \$2 must be the name of the array (attack or release).
, f 69;
#X text 10 90 \$1 must be \$0 of the envelope generator ui., f 69
;
#X obj 130 820 ./egui-foreach-breakpoint \$2;
#X obj 100 1170 outlet;
#X text 110 770 ---- Recalculate x and y ----;
#X obj 190 939 value _\$0_value;
#X obj 330 940 value _\$0_duration;
#X obj 490 940 value _\$0_starttime;
#X obj 630 451 value _\$0_height;
#X obj 480 450 value _\$0_width;
#X obj 320 450 value _\$0_padding2;
#X obj 130 450 value _\$0_padding;
#X obj 160 1120 set egui__breakpoint x prev_x y prev_y, f 99;
#X obj 200 1090 trigger f f;
#X text 10 160 Sends a bang on its outlet when finished processing.
, f 69;
#X text 870 1010 Keep in mind \, that the coordinate system starts
at the top-left corner in PD. To make up for this \, the plots are
moved to the bottom of the GOP \, but the Y-coordinate must be flipped.
, f 67;
#X msg 790 420 0;
#X obj 790 449 value _\$0_st_offset;
#X obj 160 1010 expr 0 \; max(0 \, (_\$0_st_offset + _\$0_starttime
+ _\$0_duration) / _\$0_view) * (_\$0_width - _\$0_padding2) \; max(0
\, min(1 \, _\$0_value)) * (_\$0_height - _\$0_padding2) * -1 \;,
f 96;
#X obj 100 540 trigger b b;
#X obj 130 570 symbol \$2;
#X obj 130 599 select release;
#X obj 130 628 ./egui-get-breakpoint attack -1;
#X obj 130 657 get egui__breakpoint starttime duration;
#X obj 130 686 +;
#X obj 130 715 value _\$0_st_offset;
#X text 110 520 ---- Get offset for release breakpoints ----;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 4 1 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 9 0 40 0;
#X connect 9 1 10 0;
#X connect 9 1 12 0;
#X connect 9 1 13 0;
#X connect 9 1 37 0;
#X connect 10 0 11 0;
#X connect 10 0 32 0;
#X connect 11 0 31 0;
#X connect 12 0 30 0;
#X connect 13 0 29 0;
#X connect 15 0 24 0;
#X connect 15 1 23 0;
#X connect 16 0 19 0;
#X connect 16 1 20 0;
#X connect 17 0 16 0;
#X connect 19 0 39 0;
#X connect 19 1 33 4;
#X connect 20 0 26 0;
#X connect 20 1 27 0;
#X connect 20 2 28 0;
#X connect 23 0 17 0;
#X connect 23 1 17 1;
#X connect 34 0 33 0;
#X connect 34 1 33 1;
#X connect 37 0 38 0;
#X connect 39 1 34 0;
#X connect 39 2 33 3;
#X connect 39 2 33 2;
#X connect 40 0 15 0;
#X connect 40 1 41 0;
#X connect 41 0 42 0;
#X connect 42 0 43 0;
#X connect 43 0 44 0;
#X connect 44 0 45 0;
#X connect 44 1 45 1;
#X connect 45 0 46 0;
